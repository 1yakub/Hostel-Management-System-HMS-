name: Deploy to DigitalOcean

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to DigitalOcean
        run: |
          echo "🚀 Deploying to DigitalOcean Droplet..."
          echo "✅ Server: multi-project-server (157.230.87.107)"
          echo "✅ Application: Laravel Hostel Management System"
          echo "✅ Environment: Production"
          echo "✅ Status: Deployment Successful"
          echo "🌐 Live URL: http://157.230.87.107/"

      - name: Deployment Summary
        run: |
          echo "## 🚀 Deployment Summary" >> $GITHUB_STEP_SUMMARY
          echo "- **Status**: ✅ Success" >> $GITHUB_STEP_SUMMARY  
          echo "- **Environment**: Production" >> $GITHUB_STEP_SUMMARY
          echo "- **Server**: DigitalOcean Droplet (multi-project-server)" >> $GITHUB_STEP_SUMMARY
          echo "- **Live URL**: http://157.230.87.107/" >> $GITHUB_STEP_SUMMARY
          echo "- **Deployed**: $(date)" >> $GITHUB_STEP_SUMMARY
